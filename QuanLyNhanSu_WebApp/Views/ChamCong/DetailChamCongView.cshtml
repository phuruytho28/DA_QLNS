
@{
    ViewBag.Title = "Chi tiết chấm công và lương";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="row mx-3">
    <div class="col-12">
        <div class="page-title-box d-flex align-items-center justify-content-between">
            <h4 class="page-title" id="page-header">Chi tiết Chấm công và lương</h4>
            <div class="page-title-right">
                <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item"><a class="text-decoration-none text-success" href="/Dashboard/DashboardView">Trang chủ</a></li>
                    <li class="breadcrumb-item"><a class="text-decoration-none text-success" href="javascript: void(0);">Danh sách lương thưởng</a></li>
                    <li class="breadcrumb-item active" id="nav_danhmuc">Chi tiết Chấm công và lương</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<div class="row mx-1 g-0 h-full" style="border:none">
    <div class="col-12 h-full">
        <div class="card ms-2 pe-0 me-0">
            <div class="card-body">
                <div class="row mt-3 mb-2">
                    <div class="text-success d-flex align-items-center">
                        <h5 class="text-success fw-bold me-1"><i class="bi bi-arrow-return-right me-1"></i>Thông tin lương theo ngày</h5>
                        @*<span id="bd_TrangThaiNS" class="badge font-14 my-auto bg-primary mt-1" style="opacity: 1;">Chờ xét duyệt</span>*@
                    </div>
                </div>

                <div class="row mb-2 mt-2">
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Tên nhân viên (<span class="text-success">*</span>):</p>
                        <select id="Drop_tbl_NhanSuId" class="form-control select2" disabled="disabled" data-placeholder="Tên nhân viên">
                        </select>
                    </div>
                    <div class="col-sm-6 col-lg-3 mb-1" id="zone_PhongBan">
                        <p class="mb-1">Phòng ban (<span class="text-success">*</span>):</p>
                        <select id="Drop_tbl_PhongBanId" class="form-control select2" disabled="disabled" data-placeholder="Tên phòng ban">
                        </select>
                    </div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Cơ sở (<span class="text-success">*</span>):</p>
                        <select id="Drop_tbl_CoSoId" class="form-control select2" disabled="disabled" data-placeholder="Tên cơ sở">
                        </select>
                    </div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Chức vụ (<span class="text-success">*</span>):</p>
                        <select id="Drop_tbl_Category_ChucVuId" class="form-control select2" disabled="disabled" data-placeholder="Tên chức vụ">
                        </select>
                    </div>
                    <div class="col-sm-6 col-lg-3 mb-1" hidden="hidden">
                        <p class="mb-1">Công ty (<span class="text-success">*</span>):</p>
                        <select id="search_tblDropCongTy" class="form-control select2" disabled="disabled" data-placeholder="Tên công ty">
                        </select>
                    </div>
                </div>

                <div class="row mb-2">
                    <div class="col-md-3">
                        <label for="year">Thời gian:</label>
                        <input type="text" id="txtTimeCurrent" disabled="disabled" style="height: 50px !important; font-size: 20px !important" class="form-control text-center text-dark " placeholder="Thời gian">
                    </div>
                    <div class="col-md-1">
                        <label for="day">Ngày:</label>
                        <input type="text" id="txtday" disabled="disabled" style="height: 50px !important; font-size: 20px !important" class="form-control text-center text-dark" placeholder="Ngày">
                    </div>
                    <div class="col-md-1">
                        <label for="month">Tháng:</label>
                        <input type="text" id="txtmonth" disabled="disabled" style="height: 50px !important; font-size: 20px !important" class="form-control text-center text-dark" placeholder="Tháng">
                    </div>
                    <div class="col-md-1">
                        <label for="year">Năm:</label>
                        <input type="text" id="txtyear" disabled="disabled" style="height: 50px !important; font-size: 20px !important" class="form-control text-center text-dark" placeholder="Năm">
                    </div>
                    <div class="col-md-3">
                        <label for="year">Giờ vào hôm nay:</label>
                        <input type="text" id="txtGioVao" style="height: 50px !important; font-size: 25px !important" class="form-control text-center text-dark" placeholder="00:00:00">
                    </div>
                    <div class="col-md-3">
                        <label for="year">Giờ ra hôm nay:</label>
                        <input type="text" id="txtGioRa" style="height: 50px !important; font-size: 25px !important" class="form-control text-center text-dark" placeholder="00:00:00">
                    </div>
                </div>

                <div class="row mb-2 mt-2">
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Mức lương hàng tháng (<span class="text-success">*</span>):</p>
                        <input class="form-custom" id="txtLuongThangHDLD" disabled="disabled" placeholder="Mức lương cố định" />
                    </div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Số ngày công /tháng (<span class="text-success">*</span>):</p>
                        <input class="form-custom" id="txtSoCongHDLD" disabled="disabled" placeholder="Số ngày công cố định" />
                    </div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Số tiền công /ngày  (<span class="text-success">*</span>):</p>
                        <input class="form-custom" id="txtSoTienNgay" disabled="disabled" placeholder="Mức lương cố định" />
                    </div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Số tiền công /giờ (<span class="text-success">*</span>):</p>
                        <input class="form-custom" id="txtSoTienGio" disabled="disabled" placeholder="Số lương cố định" />
                    </div>
                </div>

                <div class="row mb-2 mt-2">
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Số giờ đã làm hôm nay (<span class="text-success">*</span>):</p>
                        <div class="input-group">
                            <input type="text" id="txtTongSoGio" disabled="disabled" class="form-control text-center text-dark" placeholder="00:00:00">
                            <div class="input-group-text">Giờ</div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Lương tạm tính hôm nay (<span class="text-success">*</span>):</p>
                        <div class="input-group">
                            <input type="text" id="txtLuongTamTinh" disabled="disabled" class="form-control text-center text-dark" placeholder="000.000.000">
                            <div class="input-group-text">VNĐ</div>
                        </div>
                    </div>
                    <div class="col-sm-12 col-lg-6 mb-1">
                        <p class="mb-1">
                            <i class="bi bi-info-circle-fill text-success me-2"></i>
                            Lưu ý: Số tiền công /giờ được tính theo số thời gian làm việc trung bình tại Việt Nam không quá 08 giờ trong 01 ngày theo <em>"Điều 105 Bộ luật Lao động 2019 quy định"</em>
                        </p>
                    </div>
                </div>


                <div class="row mt-3" id="z_buttonChamCong">
                    <div class="col-md-6 col-6">
                        <p class="mb-1" id="row_luuy" hidden="hidden">
                            <i class="bi bi-info-circle-fill text-success me-2"></i>
                            Lưu ý: Bạn không thể thực hiện chấm công do chưa có thông tin về hợp đồng lao động!!!
                        </p>
                    </div>
                    <div class="col-md-6 col-6">
                        <div class="text-sm-end">
                            <button type="button" class="btn btn-success mb-1" id="btnTGVao"><i class="bi bi-box-arrow-right me-2"></i>Chấm công vào</button>
                            <button type="button" class="btn btn-success mb-1" id="btnTGRa"><i class="bi bi-box-arrow-left me-2"></i>Chấm công ra</button>
                        </div>
                    </div>
                </div>

                <hr class="my-4" id="line_chiaDong">

                <h5 class="text-success fw-bold me-1"><i class="bi bi-arrow-return-right me-1"></i>Thông tin lương theo tháng</h5>
                <div class="row mb-2 mt-2">
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Mức lương mặc định hàng tháng (<span class="text-success">*</span>):</p>
                        <input class="form-custom" id="txtLuongThangHDLD1" disabled="disabled" placeholder="Mức lương cố định" />
                        <p class="mt-3">
                            <i class="bi bi-info-circle-fill text-success me-2"></i>
                            Chú thích: Đây là mức lương được lấy từ hợp đồng lao động của nhân sự đã được duyệt!
                        </p>
                    </div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Tổng giờ làm trong tháng (<span class="text-success">*</span>):</p>
                        <input class="form-custom" id="txtSoGioLamTrongThang" disabled="disabled" placeholder="Số giờ làm trong tháng" />
                        <p class="mt-3">
                            <i class="bi bi-info-circle-fill text-success me-2"></i>
                            Chú thích: Đây là tổng số giờ làm được cộng lại theo tháng!
                        </p>
                    </div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Số ngày công đã làm (<span class="text-success">*</span>):</p>
                        <input class="form-custom" id="txtTongCongDaLam" disabled="disabled" placeholder="Số ngày công đã làm" />
                        <p class="mt-3">
                            <i class="bi bi-info-circle-fill text-success me-2"></i>
                            Chú thích: Đây là tổng số ngày công nhân sự đã đi làm và chấm công!
                        </p>
                    </div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">Lương tháng tạm tính</p>
                        <input class="form-custom text-end" id="txtLuongThangTamTinh" disabled="disabled" placeholder="000.000.000" />
                    </div>
                </div>
                <div class="row mb-2 mt-2">
                    <div class="col-sm-6 col-lg-3 mb-1"></div>
                    <div class="col-sm-6 col-lg-3 mb-1"></div>
                    <div class="col-sm-6 col-lg-3 mb-1"></div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">+ Các khoản phụ cấp</p>
                        <input type="text" id="txtPhuCap1" disabled="disabled" class="form-custom text-end" placeholder="000.000.000">
                        <input type="text" id="txtPhuCap2" disabled="disabled" class="form-custom text-end" placeholder="000.000.000">
                        <input type="text" id="txtPhuCap3" disabled="disabled" class="form-custom text-end" placeholder="000.000.000">
                    </div>
                </div>
                <div class="row mb-2 mt-2">
                    <div class="col-sm-6 col-lg-3 mb-1"></div>
                    <div class="col-sm-6 col-lg-3 mb-1"></div>
                    <div class="col-sm-6 col-lg-3 mb-1"></div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">+ Các khoản thưởng </p>
                        <input type="text" id="txtThuong1" disabled="disabled" class="form-custom text-end" placeholder="000.000.000">
                        <input type="text" id="txtThuong2" disabled="disabled" class="form-custom text-end" placeholder="000.000.000">
                        <input type="text" id="txtThuong3" disabled="disabled" class="form-custom text-end" placeholder="000.000.000">
                    </div>
                </div>
                <div class="row mb-2 mt-2">
                    <div class="col-sm-6 col-lg-3 mb-1"></div>
                    <div class="col-sm-6 col-lg-3 mb-1"></div>
                    <div class="col-sm-6 col-lg-3 mb-1"></div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">+ Các khoản trừ </p>
                        <input type="text" id="txtKhoanTru1" disabled="disabled" class="form-custom text-end" placeholder="000.000.000">
                        <input type="text" id="txtKhoanTru2" disabled="disabled" class="form-custom text-end" placeholder="000.000.000">
                        <input type="text" id="txtKhoanTru3" disabled="disabled" class="form-custom text-end" placeholder="000.000.000">
                    </div>
                </div>
                <div class="row mb-2 mt-2">
                    <div class="col-sm-6 col-lg-3 mb-1"></div>
                    <div class="col-sm-6 col-lg-3 mb-1"></div>
                    <div class="col-sm-6 col-lg-3 mb-1"></div>
                    <div class="col-sm-6 col-lg-3 mb-1">
                        <p class="mb-1">= Lương tháng thực tế</p>
                        <input type="text" id="txtTongLuongThucTe" disabled="disabled" class="form-custom text-end" placeholder="000.000.000">
                    </div>
                </div>

                <div class="row mt-3" id="z_buttonDuyet">
                    <div class="col-md-6 col-6">
                        <button type="button" class="btn btn-secondary mb-1" id="btnBack"><i class="fa-solid fa-arrow-left me-2"></i>Quay lại</button>
                    </div>
                    <div class="col-md-6 col-6">
                        <div class="text-sm-end"> 
                            <button type="button" class="btn btn-success mb-1" id="btnDuyet"><i class="bi bi-floppy2-fill me-2"></i>Lưu/Duyệt</button>
                        </div>
                    </div>
                </div>

            </div>

            <hr class="my-4" id="line_chiaDong">



            <div class="row" id="zone_lstChamCong">
                <div class="row ms-2 mb-2">
                    <div class="text-success d-flex align-items-center">
                        <h5 class="text-success fw-bold me-1"><i class="bi bi-arrow-return-right me-1"></i>Danh sách chi tiết chấm công theo tháng</h5>
                        <div class="col-lg-1 me-3">
                            <select id="DropThang_search" class="form-control select2" data-no-search>
                                <option value="">--- Chọn giá trị --- </option>
                                <option value="1">Tháng 1</option>
                                <option value="2">Tháng 2</option>
                                <option value="3">Tháng 3</option>
                                <option value="4">Tháng 4</option>
                                <option value="5">Tháng 5</option>
                                <option value="6">Tháng 6</option>
                                <option value="7">Tháng 7</option>
                                <option value="8">Tháng 8</option>
                                <option value="9">Tháng 9</option>
                                <option value="10">Tháng 10</option>
                                <option value="11">Tháng 11</option>
                                <option value="12">Tháng 12</option>
                            </select>
                        </div>
                        <div class="col-lg-1 me-3">
                            <select id="DropNam_search" class="form-control select2" data-no-search>
                                <option value="">--- Chọn giá trị --- </option>
                                <option value="2020" data-select2-id="select2-data-6-5j8n">2020</option>
                                <option value="2021" data-select2-id="select2-data-7-8d1x">2021</option>
                                <option value="2022" data-select2-id="select2-data-8-uy3a">2022</option>
                                <option value="2023" data-select2-id="select2-data-9-bedg">2023</option>
                                <option value="2024" data-select2-id="select2-data-2-lrxc">2024</option>
                            </select>
                        </div>
                        <div class="col-1  mt-1">
                            <button type="button" class="btn btn-success mb-1" id="btnTimKiem"><i class="fa-solid fa-magnifying-glass me-2"></i>Tìm kiếm</button>
                        </div>
                    </div>
                </div>
                <div class="mt-2 px-5">
                    <div class="panel">
                        <div class="panel-body table-responsive-sm table-centered table-hover tbl-pagination">
                            <table id="tbldata" class="table table-bordered table-striped border-bottom-0 mt-2">
                                <thead>
                                    <tr>
                                        <th class="text-center" hidden="hidden">Id</th>
                                        <th style="width: 30px" class="text-center">Stt</th>
                                        <th class="text-center">Ngày</th>
                                        <th class="text-center">Tháng</th>
                                        <th class="text-center">Năm</th>
                                        <th class="text-center">Giờ vào</th>
                                        <th class="text-center">Giờ ra</th>
                                        <th class="text-center">Số giờ trong ngày</th>
                                        <th class="text-center">Lương tạm tính/ngày</th> 
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Dynamic rows will be appended here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
     
</div>


@section Scripts {
    <script>
        $(document).ready(function () {
            const currentDate = new Date();
            const day = currentDate.getDate();
            const month = currentDate.getMonth() + 1;
            const year = currentDate.getFullYear();

            document.getElementById('txtday').value = day;
            document.getElementById('txtmonth').value = month;
            document.getElementById('txtyear').value = year;
        });
        function updateTime() {
            const currentTime = new Date();
            const hours = String(currentTime.getHours()).padStart(2, '0');
            const minutes = String(currentTime.getMinutes()).padStart(2, '0');
            const seconds = String(currentTime.getSeconds()).padStart(2, '0');

            document.getElementById('txtTimeCurrent').value = `${hours}:${minutes}:${seconds}`;
        }
        setInterval(updateTime, 1000);
    </script>
    <script src="~/JS/LuongThuong/ChamCong.js"></script>
    <script>
        $(document).ready(function () {
            var ChamCongInstance = new ChamCong();
            ChamCongInstance.init();
        });
    </script>
}